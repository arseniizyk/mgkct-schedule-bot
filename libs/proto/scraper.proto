syntax = "proto3";

// protoc \
//   --go_out=. \
//   --go-grpc_out=. \
//   --go_opt=module=github.com/arseniizyk/mgkct-schedule-bot/libs/proto \
//   --go-grpc_opt=module=github.com/arseniizyk/mgkct-schedule-bot/libs/proto \
//   scraper.proto

package scraper;

import "google/protobuf/timestamp.proto";

option go_package = "github.com/arseniizyk/mgkct-schedule-bot/libs/proto;pb";

service ScheduleService {
    rpc GetGroupSchedule(GroupScheduleRequest) returns (GroupScheduleResponse);
    rpc GetGroupScheduleByWeek(GroupScheduleRequest) returns (GroupScheduleResponse);
}

message GroupScheduleRequest {
    int32 id = 1;
    optional google.protobuf.Timestamp week = 2;
}

message GroupScheduleResponse {
    Group group = 1;
}

message Schedule {
    map<int32, Group> groups = 1;
}

message Group {
    int32 id = 1;
    google.protobuf.Timestamp week = 2;
    repeated Day days = 3;
}

message Day {
    string name = 1;
    repeated Subject subjects = 2;
}

message Subject {
    repeated Pair pairs = 1;
    bool is_empty = 2;
}

message Pair {
    string name = 1;
    string type = 2;
    string teacher = 3;
    string class = 4;
}
