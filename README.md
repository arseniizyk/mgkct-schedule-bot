# MGKCT Schedule Bot

–ë–æ—Ç –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–π –ú–ì–ö–¶–¢.
–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞: Scraper ‚Üî gRPC/NATS ‚Üî Tg-bot.

## –ù–∞—à–ª–∏ –æ—à–∏–±–∫—É, –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—é –∏–ª–∏ –∏–¥–µ—é?

–°–æ–∑–¥–∞–≤–∞–π—Ç–µ **issue**.

---

## üöÄ Deploy

1. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å [Docker](https://www.docker.com/)**
2. **–ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:**

   ```bash
   git clone github.com/arseniizyk/mgkct-schedule-bot
   ```
3. **–ü–æ–ª—É—á–∏—Ç—å API —á–µ—Ä–µ–∑ [BotFather](https://t.me/botfather)**
4. **–°–æ–∑–¥–∞—Ç—å `.env` –Ω–∞ –æ—Å–Ω–æ–≤–µ `.env.example`:**

   ```env
   # scraper
   SCRAPER_URL=scraper:9001
   NATS_URL="nats://nats:4222"

   # tg-bot
   TELEGRAM_TOKEN=token

   # postgres
   POSTGRES_PASSWORD=password
   POSTGRES_USER=postgres
   POSTGRES_DB=postgres
   POSTGRES_SSL=disable
   POSTGRES_PORT=5432
   ```
5. **–ó–∞–ø—É—Å—Ç–∏—Ç—å:**

   ```bash
   docker compose up --build -d
   ```

---

## üß© –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

–ü—Ä–æ–µ–∫—Ç —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –¥–≤—É—Ö —Å–µ—Ä–≤–∏—Å–æ–≤, —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ **gRPC** –∏ **NATS**.

### 1. Scraper

–°–µ—Ä–≤–∏—Å, –∫–æ—Ç–æ—Ä—ã–π:

* –ø–∞—Ä—Å–∏—Ç —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è —Å —Å–∞–π—Ç–∞ –ú–ì–ö–¶–¢;
* —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ **PostgreSQL**;
* –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç gRPC‚Äë–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å:

```protobuf
rpc GetGroupSchedule(GroupScheduleRequest) returns (GroupScheduleResponse);      // –ü–æ–ª–Ω–æ–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –≥—Ä—É–ø–ø—ã –Ω–∞ –ø–æ—Å–ª–µ–¥–Ω—é—é –Ω–µ–¥–µ–ª—é
rpc GetGroupScheduleByWeek(GroupScheduleRequest) returns (GroupScheduleResponse); // –ü–æ–ª–Ω–æ–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –≥—Ä—É–ø–ø—ã –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –Ω–µ–¥–µ–ª—é
rpc GetAvailableWeeks(AvailableWeeksRequest) returns (AvailableWeeksResponse);   // –°–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –Ω–µ–¥–µ–ª—å
```

**–°–æ–±—ã—Ç–∏—è —á–µ—Ä–µ–∑ NATS:**

* –µ—Å–ª–∏ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –æ–±–Ω–æ–≤–∏–ª–æ—Å—å ‚Äî –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–±—ã—Ç–∏–µ –æ–± –∏–∑–º–µ–Ω–µ–Ω–∏–∏;
* –µ—Å–ª–∏ –ø–æ—è–≤–∏–ª–∞—Å—å –Ω–æ–≤–∞—è –Ω–µ–¥–µ–ª—è ‚Äî –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–±—ã—Ç–∏–µ –æ –Ω–æ–≤–æ–π –Ω–µ–¥–µ–ª–µ.

### 2. Tg-bot

–°–µ—Ä–≤–∏—Å, –∫–æ—Ç–æ—Ä—ã–π —Ä–µ–∞–ª–∏–∑—É–µ—Ç —Ç–µ–ª–µ–≥—Ä–∞–º-–±–æ—Ç–∞ –∏–º–µ—é—â–µ–≥–æ —Å–ª–µ–¥—É—é—â–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏:

* –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –ø–æ –Ω–µ–¥–µ–ª—è–º;
* –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏—Ç–µ—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö –Ω–µ–¥–µ–ª—å;
* –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –ø–æ—è–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤–æ–π –Ω–µ–¥–µ–ª–∏;
* —É–≤–µ–¥–æ–º–ª—è–µ—Ç –æ–± –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö –≤ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–∏.

---

## ‚úÖ Todo

* –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥
* –ë–∞–≥—Ñ–∏–∫—Å—ã
* –§–∏–∫—Å—ã –¥–æ–∫–µ—Ä—Ñ–∞–π–ª–æ–≤
* –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–π –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ–π